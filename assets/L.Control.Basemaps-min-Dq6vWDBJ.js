L.Control.Basemaps=L.Control.extend({_map:null,includes:L.Evented?L.Evented.prototype:L.Mixin.Event,options:{position:"bottomright",tileX:0,tileY:0,tileZ:0,layers:[]},basemap:null,onAdd:function(t){this._map=t;var a=L.DomUtil.create("div","basemaps leaflet-control closed");return L.DomEvent.disableClickPropagation(a),L.Browser.touch||L.DomEvent.disableScrollPropagation(a),this.options.basemaps.forEach(function(e,l){var r="basemap";l===0?(this.basemap=e,this._map.addLayer(e),r+=" active"):l===1&&(r+=" alt");var s={x:this.options.tileX,y:this.options.tileY},m=L.Util.template(e._url,L.extend({s:e._getSubdomain(s),x:s.x,y:e.options.tms?e._globalTileRange.max.y-s.y:s.y,z:this.options.tileZ},e.options));if(e instanceof L.TileLayer.WMS){e._map=t;var i=e.options.crs||t.options.crs,p=L.extend({},e.wmsParams),d=parseFloat(p.version),h=d>=1.3?"crs":"srs";p[h]=i.code;var b=L.point(s);b.z=this.options.tileZ;var u=e._tileCoordsToBounds(b),o=i.project(u.getNorthWest()),n=i.project(u.getSouthEast()),y=(d>=1.3&&i===L.CRS.EPSG4326?[n.y,o.x,o.y,n.x]:[o.x,n.y,n.x,o.y]).join(",");m+=L.Util.getParamString(p,m,e.options.uppercase)+(e.options.uppercase?"&BBOX=":"&bbox=")+y}var c=L.DomUtil.create("div",r,a),v=L.DomUtil.create("img",null,c);v.src=m,e.options&&e.options.label&&(v.title=e.options.label),L.DomEvent.on(c,"click",function(){if(e!=this.basemap){t.removeLayer(this.basemap),t.addLayer(e),e.bringToBack(),t.fire("baselayerchange",e),this.basemap=e,L.DomUtil.removeClass(document.getElementsByClassName("basemap active")[0],"active"),L.DomUtil.addClass(c,"active");var g=(l+1)%this.options.basemaps.length;L.DomUtil.removeClass(document.getElementsByClassName("basemap alt")[0],"alt"),L.DomUtil.addClass(document.getElementsByClassName("basemap")[g],"alt")}},this)},this),this.options.basemaps.length>2&&(L.DomEvent.on(a,"mouseenter",function(){L.DomUtil.removeClass(a,"closed")},this),L.DomEvent.on(a,"mouseleave",function(){L.DomUtil.addClass(a,"closed")},this)),this._container=a,this._container}}),L.control.basemaps=function(t){return new L.Control.Basemaps(t)};
//# sourceMappingURL=L.Control.Basemaps-min-Dq6vWDBJ.js.map
